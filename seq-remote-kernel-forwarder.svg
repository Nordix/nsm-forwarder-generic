<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1331px" preserveAspectRatio="none" style="width:911px;height:1331px;" version="1.1" viewBox="0 0 911 1331" width="911px" zoomAndPan="magnify"><defs><filter height="300%" id="fdmoibzezo6y5" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="1319.6328" style="stroke:#A80036;stroke-width:1.0;" width="420.5" x="22" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="54" x="205.25" y="18.0669">vm-002</text><rect fill="#DDDDDD" height="1319.6328" style="stroke:#A80036;stroke-width:1.0;" width="421" x="464.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="54" x="648" y="18.0669">vm-003</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="67" x2="67" y1="60.4297" y2="1287.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="207.5" x2="207.5" y1="60.4297" y2="1287.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="353.5" x2="353.5" y1="60.4297" y2="1287.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="553.5" x2="553.5" y1="60.4297" y2="1287.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="699.5" x2="699.5" y1="60.4297" y2="1287.3359"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="839.5" x2="839.5" y1="60.4297" y2="1287.3359"/><rect fill="#FEFECE" filter="url(#fdmoibzezo6y5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="39" x="46" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="53" y="45.1279">nsc</text><rect fill="#FEFECE" filter="url(#fdmoibzezo6y5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="39" x="46" y="1286.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="53" y="1306.3311">nsc</text><rect fill="#FEFECE" filter="url(#fdmoibzezo6y5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="176.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="183.5" y="45.1279">nsmgr</text><rect fill="#FEFECE" filter="url(#fdmoibzezo6y5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="176.5" y="1286.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="183.5" y="1306.3311">nsmgr</text><rect fill="#FEFECE" filter="url(#fdmoibzezo6y5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="126" x="288.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="295.5" y="45.1279">kernel forwarder</text><rect fill="#FEFECE" filter="url(#fdmoibzezo6y5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="126" x="288.5" y="1286.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="295.5" y="1306.3311">kernel forwarder</text><rect fill="#FEFECE" filter="url(#fdmoibzezo6y5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="126" x="488.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="495.5" y="45.1279">kernel forwarder</text><rect fill="#FEFECE" filter="url(#fdmoibzezo6y5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="126" x="488.5" y="1286.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="495.5" y="1306.3311">kernel forwarder</text><rect fill="#FEFECE" filter="url(#fdmoibzezo6y5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="668.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="675.5" y="45.1279">nsmgr</text><rect fill="#FEFECE" filter="url(#fdmoibzezo6y5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="58" x="668.5" y="1286.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="675.5" y="1306.3311">nsmgr</text><rect fill="#FEFECE" filter="url(#fdmoibzezo6y5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="40" x="817.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="824.5" y="45.1279">nse</text><rect fill="#FEFECE" filter="url(#fdmoibzezo6y5)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="40" x="817.5" y="1286.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26" x="824.5" y="1306.3311">nse</text><polygon fill="#A80036" points="195.5,87.5625,205.5,91.5625,195.5,95.5625,199.5,91.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="67.5" x2="201.5" y1="91.5625" y2="91.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="74.5" y="86.4966">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="87.5" y="86.4966">Service.Request</text><polygon fill="#A80036" points="341.5,116.6953,351.5,120.6953,341.5,124.6953,345.5,120.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207.5" x2="347.5" y1="120.6953" y2="120.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="214.5" y="115.6294">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="227.5" y="115.6294">Service.Request</text><polygon fill="#A80036" points="218.5,145.8281,208.5,149.8281,218.5,153.8281,214.5,149.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="212.5" x2="352.5" y1="149.8281" y2="149.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="224.5" y="144.7622">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="237.5" y="144.7622">Service.Request</text><path d="M40,162.8281 L40,247.8281 L516,247.8281 L516,172.8281 L506,162.8281 L40,162.8281 " fill="#FBFB77" filter="url(#fdmoibzezo6y5)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M506,162.8281 L506,172.8281 L516,172.8281 L506,162.8281 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317" x="46" y="179.895">request={"connection":{"id":"633a8993-e2a1-...",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="46" y="195.0278">"network_service":"icmp-responder",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="346" x="46" y="210.1606">"context":{"ip_context":{}},... "payload":"ETHERNET"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="363" x="46" y="225.2935">"mechanism_preferences":[{"cls":"LOCAL","type":"VLAN",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="455" x="46" y="240.4263">"parameters":{"inodeURL":"inode://4/4026532514","name":"nsm-1"}}]}</text><polygon fill="#A80036" points="687.5,274.625,697.5,278.625,687.5,282.625,691.5,278.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207.5" x2="693.5" y1="278.625" y2="278.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="214.5" y="273.5591">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="227.5" y="273.5591">Service.Request</text><polygon fill="#A80036" points="564.5,303.7578,554.5,307.7578,564.5,311.7578,560.5,307.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="558.5" x2="698.5" y1="307.7578" y2="307.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="570.5" y="302.6919">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="583.5" y="302.6919">Service.Request</text><path d="M424,320.7578 L424,390.7578 L825,390.7578 L825,330.7578 L815,320.7578 L424,320.7578 " fill="#FBFB77" filter="url(#fdmoibzezo6y5)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M815,320.7578 L815,330.7578 L825,330.7578 L815,320.7578 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317" x="430" y="337.8247">request={"connection":{"id":"3a221a45-4b9d-...",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="430" y="352.9575">"network_service":"icmp-responder",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="350" x="430" y="368.0903">"context":{"ip_context":{}},...  "payload":"ETHERNET"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="380" x="430" y="383.2231">"mechanism_preferences":[{"cls":"LOCAL","type":"VLAN"}]}</text><polygon fill="#A80036" points="687.5,417.4219,697.5,421.4219,687.5,425.4219,691.5,421.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="553.5" x2="693.5" y1="421.4219" y2="421.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="560.5" y="416.356">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="573.5" y="416.356">Service.Request</text><polygon fill="#A80036" points="827.5,446.5547,837.5,450.5547,827.5,454.5547,831.5,450.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="699.5" x2="833.5" y1="450.5547" y2="450.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="706.5" y="445.4888">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="719.5" y="445.4888">Service.Request</text><polygon fill="#A80036" points="710.5,475.6875,700.5,479.6875,710.5,483.6875,706.5,479.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="704.5" x2="838.5" y1="479.6875" y2="479.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="716.5" y="474.6216">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="729.5" y="474.6216">Connection</text><polygon fill="#A80036" points="564.5,504.8203,554.5,508.8203,564.5,512.8203,560.5,508.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="558.5" x2="698.5" y1="508.8203" y2="508.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="570.5" y="503.7544">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="583.5" y="503.7544">Connection</text><path d="M380,521.8203 L380,697.8203 L869,697.8203 L869,531.8203 L859,521.8203 L380,521.8203 " fill="#FBFB77" filter="url(#fdmoibzezo6y5)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M859,521.8203 L859,531.8203 L869,531.8203 L859,521.8203 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303" x="386" y="538.8872">response={"id":"0c501bde-5c19-4b57-bd6f-...",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="386" y="554.02">"network_service":"icmp-responder",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="386" y="569.1528">"mechanism":{"cls":"LOCAL","type":"VLAN",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="468" x="386" y="584.2856">"parameters":{"inodeURL":"inode://4/4026532514","name":"nse13414"}},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="386" y="599.4185">"context":{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="390" y="614.5513">"ip_context":{"src_ip_addr":"169.254.0.0/32",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="450" y="629.6841">"dst_ip_addr":"169.254.0.1/32",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266" x="450" y="644.8169">"src_routes":[{"prefix":"169.254.0.1/32"}],</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="450" y="659.9497">"dst_routes":[{"prefix":"169.254.0.0/32"}]},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="390" y="675.0825">"ethernet_context":{"vlan_tag":100},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="383" x="390" y="690.2153">"extra_context":{"baseInterface":"eth2","isOneLeg":"false"}}</text><polygon fill="#A80036" points="827.5,724.4141,837.5,728.4141,827.5,732.4141,831.5,728.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="553.5" x2="833.5" y1="728.4141" y2="728.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="560.5" y="723.3481">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="586.5" y="723.3481"/><polygon fill="#FBFB77" filter="url(#fdmoibzezo6y5)" points="790,741.4141,888,741.4141,898,752.4141,888,764.4141,790,764.4141,780,752.4141,790,741.4141" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="792" y="757.481">inject interface</text><polygon fill="#A80036" points="687.5,786.6797,697.5,790.6797,687.5,794.6797,691.5,790.6797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="553.5" x2="693.5" y1="790.6797" y2="790.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="560.5" y="785.6138">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="582.5" y="785.6138">Connection</text><polygon fill="#A80036" points="827.5,815.8125,837.5,819.8125,827.5,823.8125,831.5,819.8125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="553.5" x2="833.5" y1="819.8125" y2="819.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="560.5" y="814.7466">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="586.5" y="814.7466"/><polygon fill="#FBFB77" filter="url(#fdmoibzezo6y5)" points="786,832.8125,892,832.8125,902,843.8125,892,855.8125,786,855.8125,776,843.8125,786,832.8125" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="788" y="848.8794">set IPs &amp; routes</text><polygon fill="#A80036" points="218.5,878.0781,208.5,882.0781,218.5,886.0781,214.5,882.0781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="212.5" x2="698.5" y1="882.0781" y2="882.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="224.5" y="877.0122">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="246.5" y="877.0122">Connection</text><polygon fill="#A80036" points="341.5,907.2109,351.5,911.2109,341.5,915.2109,345.5,911.2109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207.5" x2="347.5" y1="911.2109" y2="911.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="214.5" y="906.145">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="236.5" y="906.145">Connection</text><path d="M74,924.2109 L74,1085.2109 L482,1085.2109 L482,934.2109 L472,924.2109 L74,924.2109 " fill="#FBFB77" filter="url(#fdmoibzezo6y5)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M472,924.2109 L472,934.2109 L482,934.2109 L472,924.2109 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="80" y="941.2778">response={"id":"c787258f-f2e6-4115-...",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="80" y="956.4106">"network_service":"icmp-responder",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="80" y="971.5435">"mechanism":{"cls":"REMOTE","type":"VLAN"},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="80" y="986.6763">"context":{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="285" x="84" y="1001.8091">"ip_context":{"src_ip_addr":"169.254.0.0/32",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="198" x="140" y="1016.9419">"dst_ip_addr":"169.254.0.1/32",</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="266" x="140" y="1032.0747">"src_routes":[{"prefix":"169.254.0.1/32"}],</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="140" y="1047.2075">"dst_routes":[{"prefix":"169.254.0.0/32"}]},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="84" y="1062.3403">"ethernet_context":{"vlan_tag":100},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="383" x="84" y="1077.4731">"extra_context":{"baseInterface":"eth2","isOneLeg":"false"}}</text><polygon fill="#A80036" points="78.5,1111.6719,68.5,1115.6719,78.5,1119.6719,74.5,1115.6719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="72.5" x2="352.5" y1="1115.6719" y2="1115.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="84.5" y="1110.606">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="110.5" y="1110.606"/><polygon fill="#FBFB77" filter="url(#fdmoibzezo6y5)" points="18,1128.6719,116,1128.6719,126,1139.6719,116,1151.6719,18,1151.6719,8,1139.6719,18,1128.6719" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="20" y="1144.7388">inject interface</text><polygon fill="#A80036" points="218.5,1173.9375,208.5,1177.9375,218.5,1181.9375,214.5,1177.9375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="212.5" x2="352.5" y1="1177.9375" y2="1177.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="224.5" y="1172.8716">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="246.5" y="1172.8716">Connection</text><polygon fill="#A80036" points="78.5,1203.0703,68.5,1207.0703,78.5,1211.0703,74.5,1207.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="72.5" x2="352.5" y1="1207.0703" y2="1207.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="84.5" y="1202.0044">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="110.5" y="1202.0044"/><polygon fill="#FBFB77" filter="url(#fdmoibzezo6y5)" points="15,1220.0703,121,1220.0703,131,1231.0703,121,1243.0703,15,1243.0703,5,1231.0703,15,1220.0703" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="17" y="1236.1372">set IPs &amp; routes</text><polygon fill="#A80036" points="78.5,1265.3359,68.5,1269.3359,78.5,1273.3359,74.5,1269.3359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="72.5" x2="206.5" y1="1269.3359" y2="1269.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="84.5" y="1264.27">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="106.5" y="1264.27">Connection</text><!--MD5=[b852b727687f07d26f4ea7be2ce60184]
@startuml
skinparam ParticipantPadding 20
skinparam BoxPadding 10

box "vm-002" #LightBlue
participant nsc as A
participant nsmgr as B
participant "kernel forwarder" as C
end box
box "vm-003"
participant "kernel forwarder" as D
participant nsmgr as E
participant nse as F
end box
autonumber 1
A -> B : Service.Request
B -> C : Service.Request
C -> B : Service.Request
note over B,C
request={"connection":{"id":"633a8993-e2a1-...",
"network_service":"icmp-responder",
"context":{"ip_context":{}},... "payload":"ETHERNET"},
"mechanism_preferences":[{"cls":"LOCAL","type":"VLAN",
"parameters":{"inodeURL":"inode://4/4026532514","name":"nsm-1"}}]}
end note
B -> E : Service.Request
E -> D : Service.Request
note over E,D
request={"connection":{"id":"3a221a45-4b9d-...",
"network_service":"icmp-responder",
"context":{"ip_context":{}},...  "payload":"ETHERNET"},
"mechanism_preferences":[{"cls":"LOCAL","type":"VLAN"}]}
end note
D -> E : Service.Request
E -> F : Service.Request
F -> E : Connection
E -> D : Connection
note over E,D
response={"id":"0c501bde-5c19-4b57-bd6f-...",
"network_service":"icmp-responder",
"mechanism":{"cls":"LOCAL","type":"VLAN",
"parameters":{"inodeURL":"inode://4/4026532514","name":"nse13414"}},
"context":{
 "ip_context":{"src_ip_addr":"169.254.0.0/32",
		"dst_ip_addr":"169.254.0.1/32",
		"src_routes":[{"prefix":"169.254.0.1/32"}],
		"dst_routes":[{"prefix":"169.254.0.0/32"}]},
 "ethernet_context":{"vlan_tag":100},
 "extra_context":{"baseInterface":"eth2","isOneLeg":"false"}}
end note
D - -> F :
hnote over F : inject interface
D -> E : Connection
D - -> F :
hnote over F : set IPs & routes
E -> B : Connection
B -> C : Connection
note over B,C
response={"id":"c787258f-f2e6-4115-...",
"network_service":"icmp-responder",
"mechanism":{"cls":"REMOTE","type":"VLAN"},
"context":{
 "ip_context":{"src_ip_addr":"169.254.0.0/32",
               "dst_ip_addr":"169.254.0.1/32",
	       "src_routes":[{"prefix":"169.254.0.1/32"}],
	       "dst_routes":[{"prefix":"169.254.0.0/32"}]},
 "ethernet_context":{"vlan_tag":100},
 "extra_context":{"baseInterface":"eth2","isOneLeg":"false"}}
end note
C - -> A :
hnote over A : inject interface
C -> B : Connection
C - -> A :
hnote over A : set IPs & routes
B -> A : Connection
@enduml

PlantUML version 1.2021.5(Sun Apr 25 13:20:28 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>